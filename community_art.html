<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>미술 클래스 커뮤니티</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="{{url_for('static', filename='assets/img/favicon.ico')}}" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="{{url_for('static', filename='css/main.css')}}" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/community.css')}}">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">

    <script language="javascript">
            function postForm(path, params, method) {
                method = method || 'post';

                var form = document.createElement('form');
                form.setAttribute('method', method);
                form.setAttribute('action', path);

                for (var key in params) {
                    if (params.hasOwnProperty(key)) {
                        var hiddenField = document.createElement('input');
                        hiddenField.setAttribute('type', 'hidden');
                        hiddenField.setAttribute('name', key);
                        hiddenField.setAttribute('value', params[key]);

                        form.appendChild(hiddenField);
                    }
                }

                document.body.appendChild(form);
                form.submit();
            }
    </script>
</head>
<body id="page-top">
    <!-- Navigation-->
    <form action="/community" method="GET">
        <input type="hidden" name="page" value="0" />
        <input type="hidden" name="category" value="art" />
    </form>
    <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand js-scroll-trigger" href="#page-top">One-Day Class Platform</a>
            <button class="navbar-toggler navbar-toggler-right text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                Menu
                <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#" onclick="location.href='/main_class'">Class</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#" onclick="location.href='/community?page=0'">Community</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#" onclick="location.href='/logout'">Logout</a></li>                
                </ul>
            </div>
        </div>
    </nav>
    <!-- Masthead-->
    </br></br></br>

    <!-- Portfolio Section-->
    <section class="page-section portfolio" id="portfolio">
        <div class="container">
            <!-- Portfolio Section Heading-->
            <h2 style="font-family: 'Jua', sans-serif;"class="page-section-heading text-center text-uppercase text-secondary mb-0">미술 커뮤니티</h2>
            <!-- Icon Divider-->
            <div class="divider-custom">
                <div class="divider-custom-line"></div>
                <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                <div class="divider-custom-line"></div>
            </div>
            <table id="table" class="table table-hover table-mc-light-blue">
                <thead>
                    <tr>
                        <th>작성자</th>
                        <th>제목</th>
                        <th>추천</th>
                    </tr>

                </thead>
                <tbody>
                    {% for hot in hots %}
                    <tr>
                        <td data-title="작성자">{{hot['_source']['ID']}}</td>
                        <td data-title="제목">
                            <form action="/read" method="POST">
                                <input type="hidden" name="category" value="{{category}}">
                                <input type="hidden" name="post_id" value="{{hot['_id']}}">
                                <input type="hidden" name="page" value="{{page}}">
                                <input type="submit" style="background-color:white; border:none;border-right:0px; border-top:0px; border-left:0px; border-bottom:0px;" value="{{hot['_source']['title']}}">
                            </form>
                        </td>
                        <td data-title="추천">{{hot['_source']['recommend']}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="divider-custom">
                <div class="divider-custom-line"></div>
            </div>
                <div style="float:right;">
                    </br>
                    <input class="btn-post" type="submit" onclick="postForm('post',{'category':'{{category}}'})" value="작성">
                </div>
            <table id="table" class="table table-hover table-mc-light-blue">
                <thead>
                    <tr>
                        <th>작성자</th>
                        <th>제목</th>
                        <th>추천</th>
                    </tr>
                </thead>
                <tbody>
                    {% for post in posts %}
                    <tr>
                        <td data-title="작성자">{{post['_source']['ID']}}</td>
                        <td data-title="제목">
                            <form action="/read" method="POST">
                                <input type="hidden" name="category" value="{{category}}">
                                <input type="hidden" name="post_id" value="{{post['_id']}}">
                                <input type="hidden" name="page" value="{{page}}">
                                <input style="background-color:white; border:none;border-right:0px; border-top:0px; border-left:0px; border-bottom:0px;" type="submit" value="{{post['_source']['title']}}">
                            </form>
                        </td>
                        <td data-title="추천">{{post['_source']['recommend']}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div style="float:left">
                <input class="btn-page" type="submit" onclick="postForm('backpage', {'page':'{{page}}', 'category':'{{category}}'})" value="<">
            </div>
            <div style="float:right; display:inline-block">
                <input class="btn-page" type="submit" onclick="postForm('nextpage', {'page':'{{page}}', 'category':'{{category}}'})" value=">">
            </div>
            </br></br>
            
            
            </br>

            <form action="/search" method="post" class="search-bar">
                <input type="hidden" name="ID" value="{{ID}}" />
                <input type="search" name="search" id="searchbtn" pattern=".*\S.*" required>
                <button class="search-btn" type="submit">
                    <span>Search</span>
                </button>
            </form>
        </div>
    </section>

    <!-- Footer-->
    <footer class="footer text-center">
        <div class="container">
            <div class="row">
                <!-- Footer Made By-->
                <div class="col-lg-12 mb-5 mb-lg-0">
                    <h4 class="text-uppercase mb-4">Made By</h4>
                    <p class="lead mb-0">
                        권수빈 &emsp;&emsp; 김은하
                        <br />
                        김찬솔 &emsp;&emsp; 이준협
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <!-- Copyright Section-->
    <div class="copyright py-4 text-center text-white">
        <div class="container"><small>Copyright © Your Website 2020</small></div>
    </div>
    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes)-->
    <div class="scroll-to-top d-lg-none position-fixed">
        <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top"><i class="fa fa-chevron-up"></i></a>
    </div>

    <!-- Bootstrap core JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Third party plugin JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
    <!-- Contact form JS-->
    <script src="{{url_for('static', filename='assets/mail/jqBootstrapValidation.js')}}"></script>
    <script src="{{url_for('static', filename='assets/mail/contact_me.js')}}"></script>
    <!-- Core theme JS-->
    <script src="{{url_for('static', filename='js/scripts.js')}}"></script>
</body>
</html>